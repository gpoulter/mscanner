<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>

  <title>MeSH Term Scores</title>

  <link rel="stylesheet" type="text/css" href="style.css"/>

</head>

<body>

<h1 id="heading">MeSH Term Scores</h1>

<div id="body">

  <div class="box">

    <h2 class="heading">Summary of term scores</h2>

    <p class="para"><b>Distinct terms:</b> {{numterms}}</p>
    <p class="para"><b>Pseudocount:</b> {{pseudocount}}</p>

    <table id="summary">
      <thead>
        <tr>
          <th>Quantity</th><th>Positives</th><th>Negatives </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th>Number of documents</th><td>{{pdocs}}</td><td>{{ndocs}}</td>
        </tr>
        <tr>
          <th>Number of distinct terms</th><td>{{pterms}}</td><td>{{nterms}}</td>
        </tr>
        <tr>
          <th>Total number of occurrences</th><td>{{poccurs}}</td><td>{{noccurs}}</td>
        </tr>
        <tr>
          <th>Terms per document</th><td>{{"%.3f" % (poccurs/pdocs)}}</td><td>{{"%.3f" % (noccurs/ndocs)}}</td>
        </tr>
      </tbody>
    </table>

  </div>

  <div class="box">

    <h2 class="heading">Score for each term</h2>

    <table id="termscores">

      <thead>
        <tr>
          <th>Term ID</th><th>Term</th><th>Pos / Neg</th><th>Calculation</th><th>Score</th>
        </tr>
      </thead>

      <!-- score = (0=score,1=numerator,2=denominator,3=pcount,4=ncount) -->
      <tbody>
        {{for termid, score in sorted( scores.iteritems(), key=lambda x:x[1][0], reverse=True )}}<tr><td>{{termid}}</td><td>{{meshdb[termid]}}</td><td>{{score[3]}}/{{score[4]}}</td><td>ln({{"%.2e"%score[1]}}/{{"%.2e"%score[2]}})</td><td>{{"%.2f"%score[0]}}</td></tr>
      {{endfor}}</tbody>
      
    </table>

  </div>

</div>

</body>

</html>